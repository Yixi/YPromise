<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script src="../src/YPromise.js"></script>
</head>
<body>


<script>

    function fun1(){
        return new YPro(function(comp,err){
            setTimeout(function(){
                comp("fun1 done");
            },3000);
        });
    }

    function fun2(){
        return new YPro(function(comp,err){
            setTimeout(function(){
                comp("fun2 done");
            },3000);
        })
    }

    console.log('start of code -',new Date());

    var PromiseA = fun1()
        .done(function(data){
            console.log(data," -"+new Date());
            return fun2();
        })
        .then(function(d){
            console.log(d," -"+new Date());
            return fun1();
        },function(e){
            console.error(e);
        })
        .then(function(d){
            console.log(d," - "+new Date());
        });

    console.log('end of code'," -"+new Date());
    setTimeout(function(){
        PromiseA.cancel(function(){
            console.log("promiseA canceled");
        });
    },8000);
    console.log(PromiseA);
</script>
</body>
</html>